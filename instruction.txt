Полная инструкция по созданию приложения с rewarded/banners, сборкой unsigned IPA
Теперь, с фиксами, иди по шагам. App: Главный экран с кнопкой WATCH (rewarded test video), баннеры top/bottom (adaptive full width). Test IDs, consent popup. Workflow обновлён для pod install (CocoaPods on runner) — это фиксит фреймворки/линковку.
Фаза 2: UI в Main.tscn (10 мин)

Открой Main.tscn (Node2D root).
Добавь:
Button: Center, Text "WATCH".
AdView (AdMobBannerTop): Inspector > Ad Size = BANNER, Position = TOP.
AdView (AdMobBannerBottom): Ad Size = BANNER, Position = BOTTOM.

Main scene: Project Settings > Application > Run > Main Scene = res://Main.tscn.
F5: Кнопка + пустые баннеры.

Фаза 3: Код Main.gd (15 мин)
Attach к root Node2D. Актуальный GDScript (из Poing v3.1.1+ 2025: MobileAds.init, AdView.load_ad, RewardedAdLoader).
gdscriptextends Node2D

@onready var top_banner: AdView = $AdMobBannerTop
@onready var bottom_banner: AdView = $AdMobBannerBottom
@onready var watch_button: Button = $Button

var rewarded_ad: RewardedAd
var rewarded_load_callback: RewardedAdLoadCallback = RewardedAdLoadCallback.new()

func _ready():
    rewarded_load_callback.on_ad_failed_to_load = func(ad_error: LoadAdError): print("Rewarded fail: " + ad_error.message)
    rewarded_load_callback.on_ad_loaded = func(loaded_ad: RewardedAd): rewarded_ad = loaded_ad; print("Rewarded loaded!")

    # Consent (popup from .gdip debug)
    await get_tree().create_timer(1.0).timeout  # Delay

    # Init
    MobileAds.initialize()
    await get_tree().create_timer(2.0).timeout

    # Banners (test ID)
    var banner_id = "ca-app-pub-3940256099942544/2934735716"
    top_banner.ad_unit_id = banner_id
    top_banner.ad_size = AdSize.BANNER
    top_banner.load_ad(AdRequest.new())

    bottom_banner.ad_unit_id = banner_id
    bottom_banner.ad_size = AdSize.BANNER
    bottom_banner.load_ad(AdRequest.new())

    # Rewarded (test ID, mediation fallback)
    var rewarded_id = "ca-app-pub-3940256099942544/1712485313"
    RewardedAdLoader.new().load(rewarded_id, AdRequest.new(), rewarded_load_callback)

    watch_button.pressed.connect(_on_watch_pressed)

func _on_watch_pressed():
    if rewarded_ad:
        rewarded_ad.show()
    else:
        print("Rewarded not loaded — wait/VPN")

func _on_rewarded_earned(reward: RewardItem):
    print("Reward: " + str(reward.amount) + " " + reward.type)

Connect rewarded_ad.earned_reward to _on_rewarded_earned (Inspector).
F5: Output "loaded!" без ошибок.

Фаза 4: GitHub Repo и Workflow (20 мин)

Repo: git init, add ., commit, push (как раньше).
.github/workflows/build-ios.yml (обновлён для CocoaPods/pod install):YAMLname: Build Unsigned iOS IPA

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: macos-14

    steps:
    - uses: actions/checkout@v4

    - uses: godotengine/setup-godot@v2
      with:
        godot-version: 4.4.1

    - run: |
        curl -L -o templates.tpz https://downloads.tuxfamily.org/godotengine/4.4.1/Godot_4.4.1-stable_export_templates.tpz
        mkdir -p ~/.local/share/godot/export_templates/4.4.1.stable/
        unzip templates.tpz -d ~/.local/share/godot/export_templates/4.4.1.stable/

    - name: Install CocoaPods
      run: |
        gem install cocoapods  # Install Pods

    - name: Run AdMob Pod Script
      run: |
        cd ios/plugins/ads/scripts/
        chmod +x update_and_install.sh
        ./update_and_install.sh  # Update pods to latest, install

    - uses: mak448a/build-ios@main
      with:
        project-path: project.godot
        export-preset: "iOS"
        output: "TestAdMobApp.ipa"
        unsigned: true
        godot-version: "4.4.1"

    - uses: actions/upload-artifact@v4
      with:
        name: ios-ipa
        path: TestAdMobApp.ipa
Push, run workflow: Скачает IPA (Pods интегрированы).
